var SlidingView=function(e,t){window.slidingView=this;this.gestureStarted=false;this.bodyOffset=0;this.sidebarWidth=90;this.sidebar=$("#"+e);this.body=$("#"+t);this.sidebar.addClass("slidingview_sidebar");this.body.addClass("slidingview_body");var n=this;$(window).on("resize",function(e){n.resizeContent()});$(this.parent).on("resize",function(e){n.resizeContent()});if("onorientationchange"in window){$(window).on("onorientationchange",function(e){n.resizeContent()})}this.resizeContent();this.setupEventHandlers()};SlidingView.prototype.setupEventHandlers=function(){this.touchSupported="ontouchstart"in window;this.START_EVENT=this.touchSupported?"touchstart":"mousedown";this.MOVE_EVENT=this.touchSupported?"touchmove":"mousemove";this.END_EVENT=this.touchSupported?"touchend":"mouseup";var e=this;this.touchStartHandler=function(t){e.onTouchStart(t)};this.body.get()[0].addEventListener(this.START_EVENT,this.touchStartHandler,false)};SlidingView.prototype.onTouchStart=function(e){this.gestureStartPosition=this.getTouchCoordinates(e);var t=this;this.touchMoveHandler=function(e){t.onTouchMove(e)};this.touchUpHandler=function(e){t.onTouchEnd(e)};this.body.get()[0].addEventListener(this.MOVE_EVENT,this.touchMoveHandler,false);this.body.get()[0].addEventListener(this.END_EVENT,this.touchUpHandler,false);this.body.stop()};SlidingView.prototype.onTouchMove=function(e){if($(e.target).closest("#map_canvas").length>0){e.preventDefault();e.stopPropagation();this.unbindEvents();return false}var t=this.getTouchCoordinates(e);if(this.gestureStarted){e.preventDefault();e.stopPropagation();this.updateBasedOnTouchPoints(t);return}else{if(Math.abs(t.y-this.gestureStartPosition.y)>50){this.unbindEvents();return}else if(Math.abs(t.x-this.gestureStartPosition.x)>50){this.gestureStarted=true;e.preventDefault();e.stopPropagation();this.updateBasedOnTouchPoints(t);return}}};SlidingView.prototype.onTouchEnd=function(e){if(this.gestureStarted){this.snapToPosition()}this.gestureStarted=false;this.unbindEvents()};SlidingView.prototype.updateBasedOnTouchPoints=function(e){var t=e.x-this.gestureStartPosition.x,n=Math.min(Math.max(this.bodyOffset+t,0),this.sidebarWidth);this.bodyOffset=n;if(this.body.css("left")!="0px"){this.body.css("left","0px")}this.body.css("-webkit-transform","translate3d("+n+"px,0,0)");this.body.css("transform","translate3d("+n+"px,0,0)");this.sidebar.trigger("slidingViewProgress",{current:n,max:this.sidebarWidth});this.gestureStartPosition=e};SlidingView.prototype.snapToPosition=function(){var e=this.bodyOffset,t=this.sidebarWidth/2,n;this.body.css("left","0px");n=e<t?0:this.sidebarWidth;this.bodyOffset=n;if(n===0){this.close()}else{this.open()}if(e!=n){this.slideView(n)}};SlidingView.prototype.slideView=function(e){this.body.stop(true,false).animate({left:e,avoidTransforms:false,useTranslate3d:true},300);this.sidebar.trigger("slidingViewProgress",{current:e,max:this.sidebarWidth})};SlidingView.prototype.close=function(){this.bodyOffset=0;this.slideView(0)};SlidingView.prototype.open=function(){if(this.bodyOffset==this.sidebarWidth)return;this.bodyOffset=this.sidebarWidth;this.slideView(this.sidebarWidth)};SlidingView.prototype.toggle=function(){if(this.bodyOffset!==0){this.close()}else{this.open()}};SlidingView.prototype.unbindEvents=function(){this.body.get()[0].removeEventListener(this.MOVE_EVENT,this.touchMoveHandler,false);this.body.get()[0].removeEventListener(this.END_EVENT,this.touchUpHandler,false)};SlidingView.prototype.getTouchCoordinates=function(e){var t={x:0,y:0};if(this.touchSupported){var n=e.touches[0];t.x=n.pageX;t.y=n.pageY}else{t.x=e.screenX;t.y=e.screenY}return t};SlidingView.prototype.resizeContent=function(){this.body.width($(window).width());$(".sidebar, .sidebar ul").height($(window).height());$(".sidebar ul li").each(function(){$(this).css({height:"34%"});$(this).css("height",$(this).height())})}