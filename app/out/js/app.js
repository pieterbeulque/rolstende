(function(e,t){t["true"]=e;var a=function(){var e=function(){this.sv=new SlidingView("sidebar","app"),this.setupLocalStorage(),this.showMap=!1,this.loadIndex(),this.loadSidebar(),this.initNavigation()};return e.prototype.setupLocalStorage=function(){void 0===localStorage.wcs_updated&&(localStorage.wcs_updated=new Date(400).getTime()),void 0===localStorage.wcs&&(localStorage.wcs='{"results":[]}'),void 0===localStorage.restaurants_updated&&(localStorage.restaurants_updated=new Date(400).getTime()),void 0===localStorage.restaurants&&(localStorage.restaurants='{"results":[]}'),void 0===localStorage.hotels_updated&&(localStorage.hotels_updated=new Date(400).getTime()),void 0===localStorage.hotels&&(localStorage.hotels='{"results":[]}'),void 0===localStorage.pointsofinterest_updated&&(localStorage.pointsofinterest_updated=new Date(400).getTime()),void 0===localStorage.pointsofinterest&&(localStorage.pointsofinterest='{"results":[]}')},e.prototype.loadSidebar=function(){var e=this;e.sv.sidebar.oriDomi({hPanels:1,vPanels:2,speed:1,perspective:1e3,shadingIntensity:2}),e.sv.sidebar.oriDomi("accordion",45),e.sv.sidebar.on("slidingViewProgress",function(t,a){var o=1,s=a.max/2;s>a.current?o=a.current/s:a.current>s&&(o=(s-(a.current-s))/s),o*=15;var i=90-90*(a.current/a.max);i+o>0?(e.sv.sidebar.oriDomi("restoreOriDomi"),e.sv.sidebar.oriDomi("accordion",i+o)):e.sv.sidebar.oriDomi("restoreDOM")})},e.prototype.loadMap=function(){$(".switch-button").hasClass("active")&&(new n($("#map_canvas")),this.showMap=!0)},e.prototype.loadInfo=function(){new s,new l},e.prototype.loadCalendar=function(){var e=new o($("#calendar"));new l,$("#calendar-prev").on("click",function(){return e.previousMonth(),!1}),$("#calendar-next").on("click",function(){return e.nextMonth(),!1})},e.prototype.listView=function(e){new i($(".list-view"),e)},e.prototype.initNavigation=function(){var e=this;$("#app-wrapper").on("click","#sidebar a",function(){$("#ajax-loader").html('<div class="pendulum-container"><div class="pendulum"></div></div>'),$("body").attr("class","");var t,a,o={header:$("#headerTemplate").html()};switch($(this).attr("href")){case"#events":t=$("#calendarTemplate").html(),a=Mustache.to_html(t,{switchClass:"hide"},o),$("#anim-container").html(a),e.loadCalendar();break;case"#spots":e.showMap===!0?(t=$("#mapTemplate").html(),a=Mustache.to_html(t,{switchClass:"active",statusLocatie:"hide"},o),$("#anim-container").html(a),e.loadMap()):e.loadIndex();break;case"#info":t=$("#infoTemplate").html(),a=Mustache.to_html(t,{switchClass:"hide"},o),$("#anim-container").html(a),e.loadInfo()}return $("#ajax-loader").html(""),$("#app").click(),!1}),$("#app").on("click",".grid-item a",function(){$("#ajax-loader").html('<div class="pendulum-container"><div class="pendulum"></div></div>');var t,a,o,s,i=$("#listTemplate").html(),n={result:$("#listDetailTemplate").html()},l={},c=new r,h=(new Date).getTime();switch($(this).attr("href")){case"#list-wcs":a="blue-wood",l.headingClass="heading-wcs",l.color="blue",l.statusLocatie="hide",o="wcs",s="wcs";break;case"#list-poi":a="orange-wood",l.headingClass="heading-bezienswaardigheden",l.statusLocatie="hide",l.color="orange",o="pointsofinterest",s="pointsofinterest";break;case"#list-restaurants":a="blue-wood",l.headingClass="heading-restaurants",l.statusLocatie="list-view-annotation",l.color="orange",o="restaurants",s="restaurants";break;case"#list-hotels":a="red-wood",l.headingClass="heading-hotels",l.statusLocatie="list-view-annotation",l.color="red",o="hotels",s="hotels"}if($("body").addClass(a),h-3600>parseInt(localStorage[o+"_updated"],10))$.ajax({type:"get",url:c.api+s,success:function(a){localStorage[o]=JSON.stringify(a),localStorage[o+"_updated"]=(new Date).getTime(),l.results=a.results,t=Mustache.to_html(i,l,n),$("#anim-container").html(t),e.listView(a),$("#ajax-loader").html("")},error:function(){var a=JSON.parse(localStorage[o]);l.results=a.results,t=Mustache.to_html(i,l,n),$("#anim-container").html(t),e.listView(a),$("#ajax-loader").html("")}});else{var u=JSON.parse(localStorage[o]);l.results=u.results,t=Mustache.to_html(i,l,n),$("#anim-container").html(t),e.listView(u),$("#ajax-loader").html("")}return t=Mustache.to_html(i,l,n),$("#anim-container").html(t),!1}),$("#app").on("click",".back-button",function(){$("#ajax-loader").html(""),console.log("test");var e=$("#indexTemplate").html(),t=Mustache.to_html(e,{switchClass:""},{header:$("#headerTemplate").html()});return $("#anim-container").html(t),$("body").attr("class",""),!1}),$("#app").on("click",".switch-button a",function(){if($(this).parent().hasClass("active"))e.loadIndex();else{var t,a,o={header:$("#headerTemplate").html()};t=$("#mapTemplate").html(),a=Mustache.to_html(t,{switchClass:"active"},o),$("#anim-container").html(a),e.loadMap()}})},e.prototype.loadIndex=function(){this.showMap=!1;var e=$("#indexTemplate").html(),t=Mustache.to_html(e,{switchClass:""},{header:$("#headerTemplate").html()});$("#anim-container").html(t)},e}(),o=function(){var e=function(e){this.element=e,this.heading=e.find(".calendar-heading h2"),this.table=e.find(".calendar-table"),this.today=new Date,this.counter=new Date,this.settings=new r,this.events=[];var t=this;this.table.on("click","a",function(){var e=parseInt($(this).attr("href").substr(7),10),a=!0,o=!0,s=[];$.each(t.events,function(i,n){var r=t.dateFromMySQL(n.start),l=t.dateFromMySQL(n.end);r.getMonth()===t.counter.getMonth()&&(a=e>=r.getDate()),l.getMonth()===t.counter.getMonth()&&(o=l.getDate()>=e),a&&o&&s.push(n)});var i=$("#calendarListTemplate").html(),n=Mustache.to_html(i,{results:s},{result:$("#calendarDetailTemplate").html()});return $(".results").html(n),!1}),this.fillTable()};return e.prototype.readableMonth=function(){switch(this.counter.getMonth()){case 0:return"Januari";case 1:return"Februari";case 2:return"Maart";case 3:return"April";case 4:return"Mei";case 5:return"Juni";case 6:return"Juli";case 7:return"Augustus";case 8:return"September";case 9:return"Oktober";case 10:return"November";case 11:return"December"}},e.prototype.dateFromMySQL=function(e){var t=e.split(/[- :]/),a=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);return a},e.prototype.getEvents=function(){var e=this;$.getJSON(this.settings.api+"events/for/"+this.counter.getFullYear()+"/"+(this.counter.getMonth()+1),function(t){e.events=t.results,e.showEvents()})},e.prototype.showEvents=function(){var e=this.getBeginDay(),t=this.getDaysInMonth(),a=this;$.each(this.events,function(o,s){var i,n,r=a.dateFromMySQL(s.start),l=a.dateFromMySQL(s.end);r.getMonth()===a.counter.getMonth()?(i=r.getDate()-1,n=l.getDate()<r.getDate()?t:l.getDate()):(i=0,n=l.getDate());var c=a.table.find("td");for(i;n>i;i++){var h=i+e;c.eq(h).html('<a href="#event-'+(i+1)+'">'+(i+1)+"</a>")}})},e.prototype.getBeginDay=function(){var e=new Date(this.counter.getFullYear(),this.counter.getMonth(),1).getDay()-1;return e=0>e?6:e},e.prototype.getDaysInMonth=function(){return new Date(this.counter.getFullYear(),this.counter.getMonth()+1,0).getDate()},e.prototype.fillTable=function(){for(var e=this.getBeginDay(),t=this.getDaysInMonth(),a=this.table.find("td").empty(),o=e,s=1;t>=s;s++)a.eq(o).html(s),o++;$(".today").removeClass("today"),this.today.getMonth()===this.counter.getMonth()&&this.today.getFullYear()===this.counter.getFullYear()&&a.eq(this.today.getDate()+e-1).addClass("today"),this.heading.html(this.readableMonth()+" "+this.counter.getFullYear()),this.getEvents()},e.prototype.nextMonth=function(){this.counter.setMonth(this.counter.getMonth()+1),this.fillTable()},e.prototype.previousMonth=function(){this.counter.setMonth(this.counter.getMonth()-1),this.fillTable()},e}(),s=function(){var e=function(){if($.fn.makisu.enabled){var e=!1,t=$(".maki"),a=$(".info-button, dd");$("#dropdown-container").css({visibility:"hidden"}),a.click(function(){e?(t.makisu("close"),e=!1,setTimeout(function(){$("#dropdown-container").css({top:"0px"}).delay(1e3).stop().animate({top:"-60px"},function(){$("#dropdown-container").css({visibility:"hidden"})})},1e3)):($("#dropdown-container").css({visibility:"visible"}),$("#dropdown-container").stop().animate({top:"0px"},500,function(){t.makisu("open"),e=!0}))}),t.makisu({selector:"dd",overlap:.6,speed:.85})}};return e}(),i=function(){var e=function(e,t){this.element=e,this.active,this.data=t;var a=this;e.on("click","li header",function(){return a.open($(this).parent()),!1}),void 0!==this.data.results[0].available?this.showAvailability():void 0!==this.data.results[0].isOpen&&(this.showOpen(),this.showHours())};return e.prototype.showOpen=function(){for(var e=0;this.data.results.length>e;e++)1==this.data.results[e].isOpen?($("article header h1 span:eq("+e+")").addClass("list-view-annotation-alternate"),$("article header h1 span:eq("+e+")").html("open")):($("article header h1 span:eq("+e+")").addClass("list-view-annotation"),$("article header h1 span:eq("+e+")").html("gesloten"))},e.prototype.showHours=function(){console.log(this.data.results[0].open);for(var e=0;this.data.results.length>e;e++)if(1!=this.data.results[e].open.length){console.log(this.data.results[e].name);for(var t=0;this.data.results[e].open.length>t;t++)if(this.data.results[e].open[t].spans.length>0){console.log(this.data.results[e].name+" is open op "+this.data.results[e].open[t].day+" van "+this.data.results[e].open[t].spans[0].start+" tot "+this.data.results[e].open[t].spans[0].end);var a="<tr><td>"+this.data.results[e].open[t].day+'</td><td class="hours">'+this.data.results[e].open[t].spans[0].start+"u - "+this.data.results[e].open[t].spans[0].end+"u</td></tr>";$(".opening-hours:eq("+e+") table").append(a)}}},e.prototype.showAvailability=function(){for(var e=0;this.data.results.length>e;e++)0==this.data.results[e].available?($("article header h1 span:eq("+e+")").addClass("list-view-annotation-alternate"),$("article header h1 span:eq("+e+")").html("volzet")):1==this.data.results[e].available?($("article header h1 span:eq("+e+")").addClass("list-view-annotation"),$("article header h1 span:eq("+e+")").html("1 kamer")):($("article header h1 span:eq("+e+")").addClass("list-view-annotation"),$("article header h1 span:eq("+e+")").html(this.data.results[e].available+" kamers"))},e.prototype.open=function(e){return null!=this.active&&this.active.find(".detail-view").slideUp(500),e.hasClass("is-active")?($(".is-active").removeClass("is-active"),!1):($(".is-active").removeClass("is-active"),this.active=e,this.active.addClass("is-active"),e.find(".detail-view").slideDown(700),void 0)},e}(),n=function(){var e=function(e){this.element=e,this.map=null,this.rawmarkers=[],this.markers={},this.showMyLocation=!0,this.userLocation={},this.settings=new r;var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.maps(e)},function(e){t.error(e)}):this.error(),$(".changeMap").change(function(){t.checkMarkers()})};return e.prototype.error=function(){var e={coords:{latitude:51.231613,longitude:2.923822,accuracy:666}};this.showMyLocation=!1,this.maps(e)},e.prototype.maps=function(e){if(console.log("maps"),0===this.element.length)return!1;this.userLocation=e.coords;var t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),a=[{featureType:"landscape.man_made",stylers:[{color:"#fffff1"}]},{featureType:"transit.line",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",stylers:[{color:"#f9edba"}]},{},{featureType:"water",stylers:[{color:"#e4f4f3"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{color:"#94cc99"},{lightness:44}]},{featureType:"poi.medical",stylers:[{color:"#ea0f00"},{lightness:92}]},{featureType:"poi.business",stylers:[{color:"#fffff3"}]},{},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#e6e7d2"},{lightness:27},{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#f08f80"},{lightness:77}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#e28080"},{lightness:49}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#f08680"},{lightness:77}]},{featureType:"administrative.locality",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#000000"},{lightness:72}]},{}],o=new google.maps.StyledMapType(a,{name:"Styled Map"}),s={zoom:13,center:t,mapTypeControl:!1,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};if(this.map=new google.maps.Map(document.getElementById("map_canvas"),s),this.showMyLocation){var i=new google.maps.Marker({position:new google.maps.LatLng(e.coords.latitude,e.coords.longitude),map:this.map,icon:new google.maps.MarkerImage("img/current_location.png",null,null,null,new google.maps.Size(20,20)),title:"Current Location",optimized:!1,animation:google.maps.Animation.DROP});this.rawmarkers.push(i)}this.map.mapTypes.set("map_style",o),this.map.setMapTypeId("map_style"),this.setMarkers()},e.prototype.checkMarkers=function(){var e=this;$('input[type="checkbox"]:not(:checked)').each(function(){$.each(e.markers[$(this).attr("name")],function(){$(this)[0].setMap(null)})}),$('input[type="checkbox"]:checked').each(function(){$.each(e.markers[$(this).attr("name")],function(){$(this)[0].setMap(e.map)})})},e.prototype.generateMarker=function(e,t){var a;switch(t){case"restaurants":a="img/pin_blueDark.png";break;case"hotels":a="img/pin_red.png";break;case"pointsofinterest":a="img/pin_orange.png";break;case"wcs":a="img/pin_blue.png"}var o=new google.maps.Marker({position:new google.maps.LatLng(e[0].latitude,e[0].longitude),map:this.map,icon:new google.maps.MarkerImage(a,null,null,null,new google.maps.Size(20,20)),title:e[0].name,animation:google.maps.Animation.DROP,id:t+"-"+e[0].id});return o},e.prototype.setMarkers=function(){var e=this;$.getJSON(this.settings.api+"all",function(t){$.each(t.results,function(t,a){var o=t;e.markers[o]=[],$.each(a,function(){var t=$(this),a=e.generateMarker(t,o);e.markers[o].push(a),e.rawmarkers.push(a),google.maps.event.addListener(a,"click",function(){e.markerClickHandler(a)})})});for(var a=new google.maps.LatLngBounds,o=0;e.rawmarkers.length>o;o++){var s=parseFloat(e.rawmarkers[o].position.jb),i=parseFloat(e.rawmarkers[o].position.kb),n=new google.maps.LatLng(s,i);a.extend(n)}e.map.fitBounds(a)})},e.prototype.markerClickHandler=function(e){var t=e.id,a=t.split("-"),o=a[0],s=a[1],i=this;$.ajax({type:"get",url:this.settings.api+o+"/"+s,dataType:"json",success:function(e){var t=$("#listDetailTemplate").html(),a=Mustache.to_html(t,e);$("#results").html(a).removeClass("hide"),i.showMyLocation?$(".location a").attr("href","maps:saddr="+i.userLocation.latitude+","+i.userLocation.longitude+"&daddr="+e.latitude+","+e.longitude+"&z=12"):$(".location a").attr("href","maps:ll="+i.userLocation.latitude+","+i.userLocation.longitude),$("#app").animate({scrollTop:$(".detail-view").offset().top},1e3)}})},e.prototype.calculateDistance=function(e,t){return(google.maps.geometry.spherical.computeDistanceBetween(e,t)/1e3).toFixed(2)},e}(),r=function(){var e=function(){this.api="http://192.168.2.8/maiv_oostende/api/"};return e}(),l=function(){var e=function(){console.log("init validate");var e=this;this.settings=new r,$("#contactform #name, #subscribeform #name").blur(function(){e.checkTwoCharacters($(this).val(),$(this))}),$("#contactform #name, #subscribeform #name").keyup(function(){e.checkTwoCharacters($(this).val(),$(this))}),$("#contactform #message").blur(function(){e.checkTwoWords($(this).val(),$(this))}),$("#contactform #message").keyup(function(){e.checkTwoWords($(this).val(),$(this))}),$("#contactform #email, #subscribeform #email").blur(function(){e.checkValidEmail($(this).val(),$(this))}),$("#contactform #email, #subscribeform #email").keyup(function(){e.checkValidEmail($(this).val(),$(this))}),$("#contactform, #subscribeform").submit(function(){return e.submitForm($(this),$(this).attr("id")),!1})};return e.prototype.checkTwoCharacters=function(e,t){return console.log("2 charachters checken"),console.log(this),2>e.length?(this.showInValid(t),!1):(this.showValid(t),!0)},e.prototype.showInValid=function(e){e.addClass("error")},e.prototype.showValid=function(e){e.removeClass("error")},e.prototype.checkValidEmail=function(e,t){var a=RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);return console.log("hallo"),a.test(e)?(console.log("yes"),this.showValid(t),!0):a.test(e)?void 0:(console.log("no"),this.showInValid(t),!1)},e.prototype.checkTwoWords=function(e,t){var a=$.trim(e),o=a.split(" ");console.log(o.length);var s=!0;o.length>=2?$.each(o,function(e,t){return 2>e?(1>t.length&&(s=!1),void 0):!1}):s=!1,s?this.showValid(t):this.showInValid(t)},e.prototype.submitForm=function(e,t){return e.find("input, textarea").blur(),e.find(".error").length>0?!1:(console.log(t),console.log(this.settings.api),"subscribeform"===t?(console.log("ingeschreven"),$.ajax({type:"POST",cache:!1,url:this.settings.api+"subscribers",data:{name:$("#name").val(),email:$("#email").val()},success:function(t){console.log("gelukt"),console.log(t),"Could not insert data into rolstende_subscribers"==t?($(e).fadeOut(300).html('<h2>Inschrijven voor nieuwsbrief</h2><div class="succes">Je was al ingeschreven voor de nieuwsbrief.</div>'),$(e).delay(300).fadeIn(300)):($(e).fadeOut(300).html('<h2>Inschrijven voor nieuwsbrief</h2><div class="succes">Je bent succesvol ingeschreven voor de nieuwsbrief.</div>'),$(e).delay(300).fadeIn(300))},error:function(e){console.log("niet gelukt"),console.log(e)}}),!1):"contactform"===t?(console.log("mailtje gestuurd"),console.log("ingeschreven"),$(e).fadeOut(300).html('<h2>Contacteer ons</h2><div class="succes">Je boodschap is succesvol verstuurd.</div>'),$(e).delay(300).fadeIn(300),!1):!0)},e}();(function(){$("#overlay").removeClass("hide"),new a,$(window).load(function(){setTimeout(function(){$("#overlay").fadeOut(400),$(".sidebar").css("opacity","0"),$(".boat-container").css({opacity:"0",top:"50px"}),$(".logo-front").css("opacity","0"),$("#app-wrapper").css({opacity:"0"}).animate({opacity:"1"},1500,function(){$(".sidebar").css({opacity:"1"}),$("body").css("background-image","none")}),$(".logo-front").animate({opacity:"1"},1500,function(){$(".boat-container").animate({opacity:"1",top:"43px"},function(){$("#overlay").remove()})})},0)})})()})({},function(){return this}());