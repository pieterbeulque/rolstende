(function(t,e){e["true"]=t;var a=function(){var t=function(){this.sv=new SlidingView("sidebar","app"),this.setupLocalStorage(),this.showMap=!1,this.loadIndex(),this.loadSidebar(),this.initNavigation()};return t.prototype.setupLocalStorage=function(){void 0===localStorage.wcs_updated&&(localStorage.wcs_updated=new Date(400).getTime()),void 0===localStorage.wcs&&(localStorage.wcs='{"results":[]}'),void 0===localStorage.restaurants_updated&&(localStorage.restaurants_updated=new Date(400).getTime()),void 0===localStorage.restaurants&&(localStorage.restaurants='{"results":[]}'),void 0===localStorage.hotels_updated&&(localStorage.hotels_updated=new Date(400).getTime()),void 0===localStorage.hotels&&(localStorage.hotels='{"results":[]}'),void 0===localStorage.pointsofinterest_updated&&(localStorage.pointsofinterest_updated=new Date(400).getTime()),void 0===localStorage.pointsofinterest&&(localStorage.pointsofinterest='{"results":[]}')},t.prototype.loadSidebar=function(){var t=this;t.sv.sidebar.oriDomi({hPanels:1,vPanels:2,speed:1,perspective:1e3,shadingIntensity:2}),t.sv.sidebar.oriDomi("accordion",45),t.sv.sidebar.on("slidingViewProgress",function(e,a){var o=1,s=a.max/2;s>a.current?o=a.current/s:a.current>s&&(o=(s-(a.current-s))/s),o*=15;var i=90-90*(a.current/a.max);i+o>0?(t.sv.sidebar.oriDomi("restoreOriDomi"),t.sv.sidebar.oriDomi("accordion",i+o)):t.sv.sidebar.oriDomi("restoreDOM")}),$("#app").on("click",function(){t.sv.close()})},t.prototype.loadMap=function(){$(".switch-button").hasClass("active")&&(new n($("#map_canvas")),this.showMap=!0)},t.prototype.loadInfo=function(){new s,new l},t.prototype.loadCalendar=function(){var t=new o($("#calendar"));new l,$("#calendar-prev").on("click",function(){return t.previousMonth(),!1}),$("#calendar-next").on("click",function(){return t.nextMonth(),!1})},t.prototype.listView=function(t){new i($(".list-view"),t)},t.prototype.initNavigation=function(){var t=this;$("#app-wrapper").on("click","#sidebar a",function(){$("#ajax-loader").html('<div class="pendulum-container"><div class="pendulum"></div></div>'),$("body").attr("class","");var e,a,o={header:$("#headerTemplate").html()};switch($(this).attr("href")){case"#events":e=$("#calendarTemplate").html(),a=Mustache.to_html(e,{switchClass:"hide"},o),$("#anim-container").html(a),t.loadCalendar();break;case"#spots":t.showMap===!0?(e=$("#mapTemplate").html(),a=Mustache.to_html(e,{switchClass:"active",statusLocatie:"hide"},o),$("#anim-container").html(a),t.loadMap()):t.loadIndex();break;case"#info":e=$("#infoTemplate").html(),a=Mustache.to_html(e,{switchClass:"hide"},o),$("#anim-container").html(a),t.loadInfo()}return $("#ajax-loader").html(""),$("#app").click(),!1}),$("#app").on("click",".grid-item a",function(){$("#ajax-loader").html('<div class="pendulum-container"><div class="pendulum"></div></div>');var e,a,o,s,i=$("#listTemplate").html(),n={result:$("#listDetailTemplate").html()},l={},c=new r,h=(new Date).getTime();switch($(this).attr("href")){case"#list-wcs":a="blue-wood",l.headingClass="heading-wcs",l.color="blue",l.statusLocatie="hide",l.showPhotos=!1,o="wcs",s="wcs";break;case"#list-poi":a="orange-wood",l.headingClass="heading-bezienswaardigheden",l.statusLocatie="hide",l.color="orange",l.showPhotos=!0,o="pointsofinterest",s="pointsofinterest";break;case"#list-restaurants":a="blue-wood",l.headingClass="heading-restaurants",l.statusLocatie="list-view-annotation",l.color="blue",l.showPhotos=!0,o="restaurants",s="restaurants";break;case"#list-hotels":a="red-wood",l.headingClass="heading-hotels",l.statusLocatie="list-view-annotation",l.color="red",l.showPhotos=!0,o="hotels",s="hotels"}if($("body").addClass(a),h-3600>parseInt(localStorage[o+"_updated"],10))$.ajax({type:"get",url:c.api+s,success:function(a){localStorage[o]=JSON.stringify(a),localStorage[o+"_updated"]=(new Date).getTime(),l.results=a.results,e=Mustache.to_html(i,l,n),$("#anim-container").html(e),t.listView(a),$("#ajax-loader").html("")},error:function(){var a=JSON.parse(localStorage[o]);l.results=a.results,e=Mustache.to_html(i,l,n),$("#anim-container").html(e),t.listView(a),$("#ajax-loader").html("")}});else{var u=JSON.parse(localStorage[o]);l.results=u.results,e=Mustache.to_html(i,l,n),$("#anim-container").html(e),t.listView(u),$("#ajax-loader").html("")}return e=Mustache.to_html(i,l,n),$("#anim-container").html(e),!1}),$("#app").on("click",".back-button",function(){$("#ajax-loader").html(""),console.log("test");var t=$("#indexTemplate").html(),e=Mustache.to_html(t,{switchClass:""},{header:$("#headerTemplate").html()});return $("#anim-container").html(e),$("body").attr("class",""),!1}),$("#app").on("click",".switch-button a",function(){if($(this).parent().hasClass("active"))t.loadIndex();else{var e,a,o={header:$("#headerTemplate").html()};e=$("#mapTemplate").html(),a=Mustache.to_html(e,{switchClass:"active"},o),$("#anim-container").html(a),t.loadMap()}})},t.prototype.loadIndex=function(){this.showMap=!1;var t=$("#indexTemplate").html(),e=Mustache.to_html(t,{switchClass:""},{header:$("#headerTemplate").html()});$("#anim-container").html(e)},t}(),o=function(){var t=function(t){this.element=t,this.heading=t.find(".calendar-heading h2"),this.table=t.find(".calendar-table"),this.today=new Date,this.counter=new Date,this.settings=new r,this.events=[];var e=this;this.table.on("click","a",function(){var t=parseInt($(this).attr("href").substr(7),10),a=!0,o=!0,s=[];$.each(e.events,function(i,n){var r=e.dateFromMySQL(n.start),l=e.dateFromMySQL(n.end);r.getMonth()===e.counter.getMonth()&&(a=t>=r.getDate()),l.getMonth()===e.counter.getMonth()&&(o=l.getDate()>=t),a&&o&&s.push(n)});var i=$("#calendarListTemplate").html(),n=Mustache.to_html(i,{results:s},{result:$("#calendarDetailTemplate").html()});return $(".results").html(n),!1}),this.fillTable()};return t.prototype.readableMonth=function(){switch(this.counter.getMonth()){case 0:return"Januari";case 1:return"Februari";case 2:return"Maart";case 3:return"April";case 4:return"Mei";case 5:return"Juni";case 6:return"Juli";case 7:return"Augustus";case 8:return"September";case 9:return"Oktober";case 10:return"November";case 11:return"December"}},t.prototype.dateFromMySQL=function(t){var e=t.split(/[- :]/),a=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]);return a},t.prototype.getEvents=function(){var t=this;$.getJSON(this.settings.api+"events/for/"+this.counter.getFullYear()+"/"+(this.counter.getMonth()+1),function(e){t.events=e.results,t.showEvents()})},t.prototype.showEvents=function(){var t=this.getBeginDay(),e=this.getDaysInMonth(),a=this;$.each(this.events,function(o,s){var i,n,r=a.dateFromMySQL(s.start),l=a.dateFromMySQL(s.end);r.getMonth()===a.counter.getMonth()?(i=r.getDate()-1,n=l.getDate()<r.getDate()?e:l.getDate()):(i=0,n=l.getDate());var c=a.table.find("td");for(i;n>i;i++){var h=i+t;c.eq(h).html('<a href="#event-'+(i+1)+'">'+(i+1)+"</a>")}})},t.prototype.getBeginDay=function(){var t=new Date(this.counter.getFullYear(),this.counter.getMonth(),1).getDay()-1;return t=0>t?6:t},t.prototype.getDaysInMonth=function(){return new Date(this.counter.getFullYear(),this.counter.getMonth()+1,0).getDate()},t.prototype.fillTable=function(){for(var t=this.getBeginDay(),e=this.getDaysInMonth(),a=this.table.find("td").empty(),o=t,s=1;e>=s;s++)a.eq(o).html(s),o++;$(".today").removeClass("today"),this.today.getMonth()===this.counter.getMonth()&&this.today.getFullYear()===this.counter.getFullYear()&&a.eq(this.today.getDate()+t-1).addClass("today"),this.heading.html(this.readableMonth()+" "+this.counter.getFullYear()),this.getEvents()},t.prototype.nextMonth=function(){this.counter.setMonth(this.counter.getMonth()+1),this.fillTable()},t.prototype.previousMonth=function(){this.counter.setMonth(this.counter.getMonth()-1),this.fillTable()},t}(),s=function(){var t=function(){if($.fn.makisu.enabled){var t=!1,e=$(".maki"),a=$(".info-button, dd");$("#dropdown-container").css({visibility:"hidden"}),a.click(function(){t?(e.makisu("close"),t=!1,setTimeout(function(){$("#dropdown-container").css({top:"0px"}).delay(1e3).stop().animate({top:"-60px"},function(){$("#dropdown-container").css({visibility:"hidden"})})},1e3)):($("#dropdown-container").css({visibility:"visible"}),$("#dropdown-container").stop().animate({top:"0px"},500,function(){e.makisu("open"),t=!0}))}),e.makisu({selector:"dd",overlap:.6,speed:.85})}};return t}(),i=function(){var t=function(t,e){this.element=t,this.active=null,this.data=e;var a=this;t.on("click","li header",function(){return a.open($(this).parent()),!1}),void 0!==this.data.results[0].available?this.showAvailability():void 0!==this.data.results[0].isOpen&&(this.showOpen(),this.showHours())};return t.prototype.showOpen=function(){for(var t=0;this.data.results.length>t;t++)this.data.results[t].isOpen===!0?($("article header h1 span:eq("+t+")").addClass("list-view-annotation"),$("article header h1 span:eq("+t+")").html("open")):($("article header h1 span:eq("+t+")").addClass("list-view-annotation-alternate"),$("article header h1 span:eq("+t+")").html("gesloten"))},t.prototype.showHours=function(){console.log(this.data.results[0].open);for(var t=0;this.data.results.length>t;t++)if(1!=this.data.results[t].open.length){console.log(this.data.results[t].name);for(var e=0;this.data.results[t].open.length>e;e++)if(this.data.results[t].open[e].spans.length>0){console.log(this.data.results[t].name+" is open op "+this.data.results[t].open[e].day+" van "+this.data.results[t].open[e].spans[0].start+" tot "+this.data.results[t].open[e].spans[0].end);var a="<tr><td>"+this.data.results[t].open[e].day+'</td><td class="hours">'+this.data.results[t].open[e].spans[0].start+"u - "+this.data.results[t].open[e].spans[0].end+"u</td></tr>";$(".opening-hours:eq("+t+") table").append(a)}}},t.prototype.showAvailability=function(){for(var t=0;this.data.results.length>t;t++)0==this.data.results[t].available?($("article header h1 span:eq("+t+")").addClass("list-view-annotation-alternate"),$("article header h1 span:eq("+t+")").html("volzet")):1==this.data.results[t].available?($("article header h1 span:eq("+t+")").addClass("list-view-annotation"),$("article header h1 span:eq("+t+")").html("1 kamer")):($("article header h1 span:eq("+t+")").addClass("list-view-annotation"),$("article header h1 span:eq("+t+")").html(this.data.results[t].available+" kamers"))},t.prototype.open=function(t){return null!=this.active&&this.active.find(".detail-view").slideUp(500),t.hasClass("is-active")?($(".is-active").removeClass("is-active"),!1):($(".is-active").removeClass("is-active"),this.active=t,this.active.addClass("is-active"),t.find(".detail-view").slideDown(700),void 0)},t}(),n=function(){var t=function(t){this.element=t,this.map=null,this.rawmarkers=[],this.markers={},this.showMyLocation=!0,this.userLocation={},this.settings=new r;var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.maps(t)},function(t){e.error(t)}):this.error(),$(".changeMap").change(function(){e.checkMarkers()})};return t.prototype.error=function(){var t={coords:{latitude:51.231613,longitude:2.923822,accuracy:666}};this.showMyLocation=!1,this.maps(t)},t.prototype.maps=function(t){if(console.log("maps"),0===this.element.length)return!1;this.userLocation=t.coords;var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),a=[{featureType:"landscape.man_made",stylers:[{color:"#fffff1"}]},{featureType:"transit.line",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",stylers:[{color:"#f9edba"}]},{},{featureType:"water",stylers:[{color:"#e4f4f3"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{color:"#94cc99"},{lightness:44}]},{featureType:"poi.medical",stylers:[{color:"#ea0f00"},{lightness:92}]},{featureType:"poi.business",stylers:[{color:"#fffff3"}]},{},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#e6e7d2"},{lightness:27},{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#f08f80"},{lightness:77}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#e28080"},{lightness:49}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#f08680"},{lightness:77}]},{featureType:"administrative.locality",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#000000"},{lightness:72}]},{}],o=new google.maps.StyledMapType(a,{name:"Styled Map"}),s={zoom:13,center:e,mapTypeControl:!1,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};if(this.map=new google.maps.Map(document.getElementById("map_canvas"),s),this.showMyLocation){var i=new google.maps.Marker({position:new google.maps.LatLng(t.coords.latitude,t.coords.longitude),map:this.map,icon:new google.maps.MarkerImage("img/current_location.png",null,null,null,new google.maps.Size(20,20)),title:"Current Location",optimized:!1,animation:google.maps.Animation.DROP});this.rawmarkers.push(i)}this.map.mapTypes.set("map_style",o),this.map.setMapTypeId("map_style"),this.setMarkers()},t.prototype.checkMarkers=function(){var t=this;$('input[type="checkbox"]:not(:checked)').each(function(){$.each(t.markers[$(this).attr("name")],function(){$(this)[0].setMap(null)})}),$('input[type="checkbox"]:checked').each(function(){$.each(t.markers[$(this).attr("name")],function(){$(this)[0].setMap(t.map)})})},t.prototype.generateMarker=function(t,e){var a;switch(e){case"restaurants":a="img/pin_blueDark.png";break;case"hotels":a="img/pin_red.png";break;case"pointsofinterest":a="img/pin_orange.png";break;case"wcs":a="img/pin_blue.png"}var o=new google.maps.Marker({position:new google.maps.LatLng(t[0].latitude,t[0].longitude),map:this.map,icon:new google.maps.MarkerImage(a,null,null,null,new google.maps.Size(20,20)),title:t[0].name,animation:google.maps.Animation.DROP,id:e+"-"+t[0].id});return o},t.prototype.setMarkers=function(){var t=this;$.getJSON(this.settings.api+"all",function(e){$.each(e.results,function(e,a){var o=e;t.markers[o]=[],$.each(a,function(){var e=$(this),a=t.generateMarker(e,o);t.markers[o].push(a),t.rawmarkers.push(a),google.maps.event.addListener(a,"click",function(){t.markerClickHandler(a)})})});for(var a=new google.maps.LatLngBounds,o=0;t.rawmarkers.length>o;o++){var s=parseFloat(t.rawmarkers[o].position.jb),i=parseFloat(t.rawmarkers[o].position.kb),n=new google.maps.LatLng(s,i);a.extend(n)}t.map.fitBounds(a)})},t.prototype.markerClickHandler=function(t){var e=t.id,a=e.split("-"),o=a[0],s=a[1],i=this;$.ajax({type:"get",url:this.settings.api+o+"/"+s,dataType:"json",success:function(t){t.showPhotos="wcs"!==o;var e=$("#listDetailTemplate").html(),a=Mustache.to_html(e,t);$("#results").html(a).removeClass("hide"),i.showMyLocation?$(".location a").attr("href","maps:saddr="+i.userLocation.latitude+","+i.userLocation.longitude+"&daddr="+t.latitude+","+t.longitude+"&z=12"):$(".location a").attr("href","maps:ll="+i.userLocation.latitude+","+i.userLocation.longitude),$("#app").animate({scrollTop:$(".detail-view").offset().top},1e3)}})},t.prototype.calculateDistance=function(t,e){return(google.maps.geometry.spherical.computeDistanceBetween(t,e)/1e3).toFixed(2)},t}(),r=function(){var t=function(){this.api="http://192.168.2.8/maiv_oostende/api/"};return t}(),l=function(){var t=function(){console.log("init validate");var t=this;this.settings=new r,$("#contactform #name, #subscribeform #name").blur(function(){t.checkTwoCharacters($(this).val(),$(this))}),$("#contactform #name, #subscribeform #name").keyup(function(){t.checkTwoCharacters($(this).val(),$(this))}),$("#contactform #message").blur(function(){t.checkTwoWords($(this).val(),$(this))}),$("#contactform #message").keyup(function(){t.checkTwoWords($(this).val(),$(this))}),$("#contactform #email, #subscribeform #email").blur(function(){t.checkValidEmail($(this).val(),$(this))}),$("#contactform #email, #subscribeform #email").keyup(function(){t.checkValidEmail($(this).val(),$(this))}),$("#contactform, #subscribeform").submit(function(){return t.submitForm($(this),$(this).attr("id")),!1})};return t.prototype.checkTwoCharacters=function(t,e){return console.log("2 charachters checken"),console.log(this),2>t.length?(this.showInValid(e),!1):(this.showValid(e),!0)},t.prototype.showInValid=function(t){t.addClass("error")},t.prototype.showValid=function(t){t.removeClass("error")},t.prototype.checkValidEmail=function(t,e){var a=RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);return console.log("hallo"),a.test(t)?(console.log("yes"),this.showValid(e),!0):a.test(t)?void 0:(console.log("no"),this.showInValid(e),!1)},t.prototype.checkTwoWords=function(t,e){var a=$.trim(t),o=a.split(" ");console.log(o.length);var s=!0;o.length>=2?$.each(o,function(t,e){return 2>t?(1>e.length&&(s=!1),void 0):!1}):s=!1,s?this.showValid(e):this.showInValid(e)},t.prototype.submitForm=function(t,e){return t.find("input, textarea").blur(),t.find(".error").length>0?!1:(console.log(e),console.log(this.settings.api),"subscribeform"===e?(console.log("ingeschreven"),$.ajax({type:"POST",cache:!1,url:this.settings.api+"subscribers",data:{name:$("#name").val(),email:$("#email").val()},success:function(e){console.log("gelukt"),console.log(e),"Could not insert data into rolstende_subscribers"==e?($(t).fadeOut(300).html('<h2>Inschrijven voor nieuwsbrief</h2><div class="succes">Je was al ingeschreven voor de nieuwsbrief.</div>'),$(t).delay(300).fadeIn(300)):($(t).fadeOut(300).html('<h2>Inschrijven voor nieuwsbrief</h2><div class="succes">Je bent succesvol ingeschreven voor de nieuwsbrief.</div>'),$(t).delay(300).fadeIn(300))},error:function(t){console.log("niet gelukt"),console.log(t)}}),!1):"contactform"===e?(console.log("mailtje gestuurd"),console.log("ingeschreven"),$(t).fadeOut(300).html('<h2>Contacteer ons</h2><div class="succes">Je boodschap is succesvol verstuurd.</div>'),$(t).delay(300).fadeIn(300),!1):!0)},t}();(function(){"ontouchstart"in window?($("#overlay").removeClass("hide"),new a,$(window).load(function(){setTimeout(function(){$("#overlay").fadeOut(400),$(".sidebar").css("opacity","0"),$(".boat-container").css({opacity:"0",top:"50px"}),$(".logo-front").css("opacity","0"),$("#app-wrapper").css({opacity:"0"}).animate({opacity:"1"},1500,function(){$(".sidebar").css({opacity:"1"}),$("body").css("background-image","none")}),$(".logo-front").animate({opacity:"1"},1500,function(){$(".boat-container").animate({opacity:"1",top:"43px"},function(){$("#overlay").remove()})})},0)})):window.location="desktop.htm"})()})({},function(){return this}());